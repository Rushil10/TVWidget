<html>
<head>
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script src="exchangeInfo.js"></script>
</head>
<body>
<select onChange="LoadCharts();" id="pairs">
<!--    <option value="BTCUSDT">BTCUSDT</option>
    <option value="ETHUSDT">ETHUSDT</option>-->
</select>
<br>
<div class="tradingview-widget-container" id="tvchart"></div>
</body>
<script>

console.log(window.location.href.split('?'))
var a = window.location.href.split('=');
console.log(a)
var id = a[a.length-1];
console.log(id)
//PASS ALL THE SYMBOLS 
var sym = exchangeInfo.symbols,markup='';
sym.forEach(d => {
    markup += '<option value="' + d.symbol + '">' + d.symbol + '</option>';
});
document.getElementById('pairs').innerHTML = markup;
  
LoadCharts();    
function LoadCharts(){
    var a = window.location.href.split('=');
console.log(a)
var id = a[a.length-1];
console.log(id)
let symbol = id
var type = a[a.length-2];
var c = type.split('?')

var st = 1;
if(c[0]==='line'){
    st=2;
}
    //let symbol = document.getElementById('pairs').value;
    //RENDER CHART
    new TradingView.widget(
      {
  "autosize": true,
  "symbol": "BINANCE:" + symbol,
  "interval": "5",
  "timezone": "Asia/Kolkata",
  "theme": "Light",
  "style": st,
  "locale": "in",
  "toolbar_bg": "#f1f3f6",
  "enable_publishing": false,
  "allow_symbol_change": true,
  /* "studies": [
    "AwesomeOscillator@tv-basicstudies",
    "MACD@tv-basicstudies",
    "RSI@tv-basicstudies"
  ], */
  "container_id": "tvchart"
    });
}
    
</script>
</html>